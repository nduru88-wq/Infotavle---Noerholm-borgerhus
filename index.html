<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Infoboard</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        overflow: hidden;
        font-family: sans-serif;
    }
    .container {
        display: grid;
        grid-template-columns: 1fr 1fr; /* venstre og h√∏jre halvdel */
        height: 100vh;
        width: 100vw;
    }
    .left-column {
        display: grid;
        grid-template-rows: 1fr 1fr; /* top og bund */
        height: 100%;
        width: 100%;
    }
    .left-bottom {
        display: grid;
        grid-template-rows: 1fr 1fr; /* slides og vejr */
        width: 100%;
        height: 100%;
    }
    .right-column {
        width: 100%;
        height: 100%;
    }
    iframe {
        width: 100%;
        height: 100%;
        border: none;
    }
    #weather {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-size: 2em;
    }
    #weather img {
        width: 80px;
        height: 80px;
    }
</style>
</head>
<body>
    <div class="container">
        <!-- Venstre kolonne: top = Google Kalender, bund = Slides + Vejr -->
        <div class="left-column">
            <!-- Google Kalender i listevisning -->
            <iframe src="https://calendar.google.com/calendar/embed?src=fd7eaf4e2aa69c3e984a83824983eb7655b38893a5d5c95d4145d28197a0402c%40group.calendar.google.com&mode=AGENDA&ctz=Europe%2FCopenhagen" title="Google Kalender - Listevisning"></iframe>

            <!-- Nederste del: Slides + Vejr -->
            <div class="left-bottom">
                <!-- Google Slides -->
                <iframe src="https://docs.google.com/presentation/d/e/2PACX-1vRb_y8noPAO8Wlsq5XEuUOSqGjxqX_qw6O3ObdTHT_IGln017TUejxIiA3RFZ2i-1liluSuvMgf-Bez/pubembed?start=true&loop=true&delayms=10000" title="Google Slides" allowfullscreen></iframe>

                <!-- Weather -->
                <div id="weather">Indl√¶ser vejr...</div>
            </div>
        </div>

        <!-- H√∏jre kolonne: Borgernyt.dk hjemmeside i fuld h√∏jde -->
        <div class="right-column">
            <iframe src="https://borgernyt.dk/infotavle-aktiviteter/" title="Borgernyt Aktiviteter" sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
        </div>
    </div>

<script>
async function fetchWeather() {
    const apiKey = "99ab5a0a923bb9ec265fe7e2e2001fe1";
    const city = "N√∏rholm,DK"; // Fallback to city name
    const url = `https://api.openweathermap.org/data/2.5/weather?q=N%C3%B8rholm,DK&units=metric&lang=da&appid=${apiKey}`;

    try {
        const response = await fetch(url);
        if (!response.ok) throw new Error('Netv√¶rksfejl');
        const data = await response.json();

        const temp = Math.round(data.main.temp);
        const desc = data.weather[0].description;
        const icon = data.weather[0].icon;
        const iconUrl = `https://openweathermap.org/img/wn/${icon}@2x.png`;

        document.getElementById('weather').innerHTML = `
            <div>üå¶Ô∏è Vejr i N√∏rholm</div>
            <img src="${iconUrl}" alt="${desc}">
            <div>${temp}¬∞C, ${desc.charAt(0).toUpperCase() + desc.slice(1)}</div>
        `;
    } catch (error) {
        document.getElementById('weather').innerText = "Kunne ikke hente vejrdata.";
    }
}

// Initial fetch and auto-update every 15 minutes
fetchWeather();
setInterval(fetchWeather, 15 * 60 * 1000);
</script>
</body>
</html>